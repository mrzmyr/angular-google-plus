/*! angular-google-plus - v0.1.2 2015-04-27 */
var options={};angular.module("googleplus",[]).provider("GooglePlus",[function(){options.clientId=null,this.setClientId=function(a){return options.clientId=a,this},this.getClientId=function(){return options.clientId},options.apiKey=null,this.setApiKey=function(a){return options.apiKey=a,this},this.getApiKey=function(){return options.apiKey},options.scopes="https://www.googleapis.com/auth/plus.login",this.setScopes=function(a){return options.scopes=a,this},this.getScopes=function(){return options.scopes},this.init=function(a){angular.extend(options,a)},this.setServerSide=function(){options.accessType="offline",options.responseType="code token id_token gsession"},this.setClientSide=function(){delete options.accessType,delete options.responseType},this.$get=["$q","$rootScope","$timeout",function(a,b,c){var d,e=function(){};return e.prototype.login=function(){return d=a.defer(),gapi.auth.authorize({client_id:options.clientId,scope:options.scopes,immediate:!1,access_type:options.accessType,response_type:options.responseType},this.handleAuthResult),d.promise},e.prototype.checkAuth=function(){gapi.auth.authorize({client_id:options.clientId,scope:options.scopes,immediate:!0},this.handleAuthResult)},e.prototype.handleClientLoad=function(){gapi.client.setApiKey(options.apiKey),gapi.auth.init(function(){}),c(this.checkAuth,1)},e.prototype.handleAuthResult=function(a){a&&!a.error?(d.resolve(a),b.$apply()):d.reject("error")},e.prototype.getUser=function(){var c=a.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(a){c.resolve(a),b.$apply()})}),c.promise},e.prototype.getToken=function(){return gapi.auth.getToken()},e.prototype.setToken=function(a){return gapi.auth.setToken(a)},e.prototype.logout=function(){return gapi.auth.signOut(),d.promise},new e}]}]).run([function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}]);